<h1>Autodialer</h1>

<div style="display: flex; gap: 20px;">
  <div style="border: 1px solid #ccc; padding: 10px;">
    <h3>Manual Call</h3>
    <%= form_with model: @call, local: true do |f| %>
      <%= f.label :phone_number %>
      <%= f.text_field :phone_number %>
      <%= f.submit "Call" %>
    <% end %>
  </div>

  <div style="border: 1px solid #ccc; padding: 10px;">
    <h3>AI Prompt</h3>
    <%= form_with url: calls_path, local: true do |f| %>
      <%= f.label :ai_prompt, "Enter command (e.g. 'Call 1234567890')" %>
      <%= f.text_area :ai_prompt %>
      <%= f.submit "Process" %>
    <% end %>
  </div>

  <div style="border: 1px solid #ccc; padding: 10px;">
    <h3>Upload CSV</h3>
    <%= form_with url: calls_path, local: true, multipart: true do |f| %>
      <%= f.file_field :file %>
      <%= f.submit "Upload" %>
    <% end %>
  </div>
</div>

<hr>

<h2>Recent Calls</h2>
<table>
  <thead>
    <tr>
      <th>Number</th>
      <th>Status</th>
      <th>Log</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <% @calls.each do |call| %>
      <tr>
        <td><%= call.phone_number %></td>
        <td><%= call.status %></td>
        <td><%= call.log %></td>
        <td><%= call.created_at %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<p><%= link_to "Go to Blog", posts_path %></p>
